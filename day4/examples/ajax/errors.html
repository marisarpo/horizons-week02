<!DOCTYPE html>
<html >
  <head>
    <meta charset="UTF-8">
    <title>Horizons AJAX ERRORS Examples</title>
  </head>

  <body>

    <h1>AJAX Error Handling</h1>

    <p>Given the following list of urls you need to use AJAX to remove the ones that are broken.</p>

    <ul id="links">
      <li id="products">https://horizons-json-cors.s3.amazonaws.com/products.json</li>
      <li id="members">https://horizons-json-cors.s3.amazonaws.com/members.txt</li>
      <li id="JhoUfx3vNy2C6l8dzki84Tp2e3cds3WF">https://horizons-json-cors.s3.amazonaws.com/products/JhoUfx3vNy2C6l8dzki84Tp2e3cds3WF.json</li>
      <li id="oUfx3vNy2C6l8dzki84Tp2e3cds3">https://horizons-json-cors.s3.amazonaws.com/products/oUfx3vNy2C6l8dzki84Tp2e3cds3.json</li>
      <li id="poem">https://horizons-json-cors.s3.amazonaws.com/poem.txt</li>
    </ul>

    <script src='https://code.jquery.com/jquery-2.2.4.min.js'></script>
    <script>
      // YOUR CODE HERE
      var numLinks = $('#links').children().length;
      // console.log($('#links').children().eq(0).text());
    
      //IIFE method

      for(var i = 0; i<numLinks;i++){
       (function(i){
        // console.log(i); 
        // return (function(){
          $.ajax({
            url: $('#links').children().eq(i).text(),
            success: function(){
              console.log('success');
            },
            error:function(){
              $('#links').children().eq(i).remove();
            }
          })
        // })();
       })(i);
      }

      //.each jQuery method

      // $('li').each(function(index,value){
      //   // console.log($(value).text())
      //   $.ajax({
      //     url: $(value).text(),
      //     error:function(){
      //       $('#links').children().eq(index).remove();
      //     }
      //   })
      //  });

    </script>
  </body>
</html>

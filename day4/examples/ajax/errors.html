<!DOCTYPE html>
<html >
	<head>
		<meta charset="UTF-8">
		<title>Horizons AJAX ERRORS Examples</title>
	</head>

	<body>

		<h1>AJAX Error Handling</h1>

		<p>Given the following list of urls you need to use AJAX to remove the ones that are broken.</p>

		<ul id="links">
			<li id="products">https://horizons-json-cors.s3.amazonaws.com/products.json</li>
			<li id="members">https://horizons-json-cors.s3.amazonaws.com/members.txt</li>
			<li id="JhoUfx3vNy2C6l8dzki84Tp2e3cds3WF">https://horizons-json-cors.s3.amazonaws.com/products/JhoUfx3vNy2C6l8dzki84Tp2e3cds3WF.json</li>
			<li id="oUfx3vNy2C6l8dzki84Tp2e3cds3">https://horizons-json-cors.s3.amazonaws.com/products/oUfx3vNy2C6l8dzki84Tp2e3cds3.json</li>
			<li id="poem">https://horizons-json-cors.s3.amazonaws.com/poem.txt</li>
		</ul>

		<script src='https://code.jquery.com/jquery-2.2.4.min.js'></script>
		<script>
			//go through each link & run ajax code on it

			//get jQuery array of each line in ID=links w div=li
			let links = $('#links li');

			//for each element of links (each element will be a line), grab the text segment(url) & test
			$.each(links, function(i, elem) {
				$.ajax({
					url: ($(elem).text()),
					success: function (resp) {
						console.log('Success!', resp);
					},
					error: function (err) {
						console.log('ERROR', err);
						
						//grab id from each error url & concat w/ #
						let rmvStr = '#' + $(elem).attr('id');
						$(rmvStr).remove();
						//if error, remove link from html
					}
				});
			});

		</script>
	</body>
</html>

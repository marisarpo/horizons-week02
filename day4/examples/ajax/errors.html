<!DOCTYPE html>
<html >
  <head>
    <meta charset="UTF-8">
    <title>Horizons AJAX ERRORS Examples</title>
  </head>

  <body>

    <h1>AJAX Error Handling</h1>

    <p>Given the following list of urls you need to use AJAX to remove the ones that are broken.</p>

    <ul id="links">
      <li id="products">https://horizons-json-cors.s3.amazonaws.com/products.json</li>
      <li id="members">https://horizons-json-cors.s3.amazonaws.com/members.txt</li>
      <li id="JhoUfx3vNy2C6l8dzki84Tp2e3cds3WF">https://horizons-json-cors.s3.amazonaws.com/products/JhoUfx3vNy2C6l8dzki84Tp2e3cds3WF.json</li>
      <li id="oUfx3vNy2C6l8dzki84Tp2e3cds3">https://horizons-json-cors.s3.amazonaws.com/products/oUfx3vNy2C6l8dzki84Tp2e3cds3.json</li>
      <li id="poem">https://horizons-json-cors.s3.amazonaws.com/poem.txt</li>
    </ul>

    <script src='https://code.jquery.com/jquery-2.2.4.min.js'></script>
    <script>
    $(document).ready(function(){
      // $('#links').on('click','li', function(){
      //   $.ajax({
      //     url:$(this).text(),
      //     // type: 'text',
      //     // method: 'get',
      //     success: function(res){
      //       console.log('success!');
      //     },
      //     error: function(e) {
      //       $(this).remove();
      //     }.bind(this)
      //     // error: $(this).remove()
      //   });
      // })


      var myLinks = $('#links').children();
          console.log(myLinks);
          $.each(myLinks,function(index,val){
            $.ajax({
              url:$(val).text(),
              error:function(err){
                $(val).remove();
              }
            })
          })

    })
    // $.ajax({
    //   // url: 'https://horizons-json-cors.s3.amazonaws.com/products.json',
    //   url:$('#links'). ,
    //   type: 'text',
    //   method: 'get'
    //   success: function(res){
    //     console.log('success!');
    //   },
    //   error: function(e) {
    //     // $('#links').
    //     console.log('error!');
    //   }
    // });
    </script>

  </body>
</html>

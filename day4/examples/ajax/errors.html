<!DOCTYPE html>
<html >
<head>
  <meta charset="UTF-8">
  <title>Horizons AJAX ERRORS Examples</title>
</head>

<body>

  <h1>AJAX Error Handling</h1>

  <p>Given the following list of urls you need to use AJAX to remove the ones that are broken.</p>

  <ul id="links">
    <li id="products">https://horizons-json-cors.s3.amazonaws.com/products.json</li>
    <li id="members">https://horizons-json-cors.s3.amazonaws.com/members.txt</li>
    <li id="JhoUfx3vNy2C6l8dzki84Tp2e3cds3WF">https://horizons-json-cors.s3.amazonaws.com/products/JhoUfx3vNy2C6l8dzki84Tp2e3cds3WF.json</li>
    <li id="oUfx3vNy2C6l8dzki84Tp2e3cds3">https://horizons-json-cors.s3.amazonaws.com/products/oUfx3vNy2C6l8dzki84Tp2e3cds3.json</li>
    <li id="<!-- poem -->">https://horizons-json-cors.s3.amazonaws.com/poem.txt</li>
  </ul>

  <script src='https://code.jquery.com/jquery-2.2.4.min.js'></script>
  <script>
      // YOUR CODE HERE
      var i = 0;
      var numLists = $("ul li").length;

window.getData=function(){
      // $("ul li").eq(1).text('2');
      // for (var i = 0; i < numLists; i++){
        // console.log(i);
        // console.log($("ul li").eq(i).text());
        // console.log(i);
        $.ajax({
          url: $("ul li").eq(i).text(),
          // async: true,
          success: function(resp){
            i++;
            // console.log('Success');
            // console.log(i);
            if(i<numLists){
              getData();
            }
          },
          
          error: function(err){
            // console.log('ERROR', err);
            // console.log('hi' + i);
            i++;
            $("ul li").eq(i).remove();
            if(i<numLists){
              getData();
            }
          }
        })
}
getData();
    </script>
  </body>
  </html>
